<%= render 'shared/certificate_details', certificate: @certificate %>

<h1 class="govuk-heading-l"> <%= t 'user_journey.before_you_start.title' %></h1>
<p><%= t 'user_journey.before_you_start.rotate_certificate_read_steps' %></p>
<p><%= t 'user_journey.before_you_start.before_you_upload' %><%= @certificate.component_type == COMPONENT_TYPE::MSA ? t('user_journey.before_you_start.msa_with_abbreviation') : t('user_journey.before_you_start.vsp_with_abbreviation') %>
<%= t('user_journey.before_you_start.you_must', type: @certificate.usage ) %>
<% if @certificate.usage == "signing" %>
  <%= t 'user_journey.before_you_start.create_signing_key_and_certificate' %>
<% else %>
  <ul class="govuk-list govuk-list--number">
    <li><%= t 'user_journey.before_you_start.create_key_and_certificate' %></li>
    <li><%= t('user_journey.before_you_start.create_encryption_key_and_certificate', component: (@certificate.component_type == COMPONENT_TYPE::MSA ? " MSA " : " VSP "))%></li>
  </ul>
<% end %>
</p>
<p><%= t 'user_journey.before_you_start.find_out_more' %>
  <% if @certificate.usage == "encryption" && @certificate.component_type == COMPONENT_TYPE::MSA %>
    <a href="https://prototype-docs.cloudapps.digital/rotating-your-keys-and-certificates/msa-encryption/#rotate-your-msa-encryption-key-and-certificate">
    <%= t('user_journey.before_you_start.rotate_key_and_certificate', component: "MSA", certificate: "Encyrption") %></a>
  <% elsif @certificate.usage == "encryption" && @certificate.component_type == COMPONENT_TYPE::SP %>
    <a href="https://prototype-docs.cloudapps.digital/rotating-your-keys-and-certificates/vsp-encryption/#rotate-your-vsp-encryption-key-and-certificate">
    <%= t('user_journey.before_you_start.rotate_key_and_certificate', component: "VSP", certificate: "Encyrption") %></a>
  <% elsif @certificate.usage == "signing" && @certificate.component_type == COMPONENT_TYPE::MSA %>
    <a href="https://prototype-docs.cloudapps.digital/rotating-your-keys-and-certificates/msa-signing/#rotate-your-msa-signing-key-and-certificate">
    <%= t('user_journey.before_you_start.rotate_key_and_certificate', component: "MSA", certificate: "Signing") %></a>
  <% elsif @certificate.usage == "signing" && @certificate.component_type == COMPONENT_TYPE::SP %>
    <a href="https://prototype-docs.cloudapps.digital/rotating-your-keys-and-certificates/vsp-signing/#rotate-your-vsp-signing-key-and-certificate">
    <%= t('user_journey.before_you_start.rotate_key_and_certificate', component: "VSP", certificate: "Signing") %></a>
  <% end %>
  <%= t 'user_journey.before_you_start.in_documentation' %>
</p>
<% if @certificate.usage == "encryption" %>
  <div class="govuk-warning-text">
    <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
    <strong class="govuk-warning-text__text">
      <span class="govuk-warning-text__assistive"><%= t 'layout.application.warning' %></span>
        <%= t('user_journey.before_you_start.must_update', component: @certificate.component_type == COMPONENT_TYPE::MSA ? " MSA " : " VSP " )%>
      </strong>
  </div>
<% end %>

<%= link_to @certificate.usage == "encryption" ?  t('user_journey.before_you_start.have_updated', component: (@certificate.component_type == COMPONENT_TYPE::MSA ? " MSA " : " VSP ")) : t('user_journey.before_you_start.continue'), upload_certificate_path, class: "govuk-button", data: { module: "govuk-button" }, role:"button" %> 
