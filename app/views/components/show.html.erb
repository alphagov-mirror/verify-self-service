<h1 class="govuk-heading-xl"><%= @component.name %></h1>

<h2 class="govuk-heading-l"><%= @component.component_type %></h2>

<%= link_to 'Upload', new_component_certificate_path(@component), class: 'govuk-button' %>

    <%= render partial: "certificates/status/certificate_table",
      locals: { certificates: @component.enabled_signing_certificates,
      heading: 'Signing Certificates (Enabled)' }
    %>

    <%= render partial: "certificates/status/certificate_table",
      locals: { certificates: @component.disabled_signing_certificates,
      heading: 'Signing Certificates (Disabled)' }
    %>

    <% if @component.encryption_certificate.present? %>
      <%= render partial: "certificates/status/certificate_table",
        locals: { certificates: [@component.encryption_certificate],
        heading: 'Encryption Certificate assigned to component' }
      %>
    <% end %>

<% if @component.certificates.present? %>

    <div class="govuk-accordion" data-module="accordion" id="accordion-default">

      <div class="govuk-accordion__section ">
        <div class="govuk-accordion__section-header">
          <h2 class="govuk-accordion__section-heading">
            <span class="govuk-accordion__section-button" id="accordion-default-heading-2">
              Previous encryption Certificates
            </span>
          </h2>
        </div>
        <div id="accordion-default-content-2" class="govuk-accordion__section-content" aria-labelledby="accordion-default-heading-2">

            <% if @component.encryption_certificates.present? %>
              <%= render partial: "certificates/list/certificate_table",
              locals: { 
                certificates: @component.previous_encryption_certificates,
                heading: 'Previous Encryption Certificates for this component'}
            %>
            <% end %>

        </div>
      </div>
      <div class="govuk-accordion__section ">
        <div class="govuk-accordion__section-header">
          <h2 class="govuk-accordion__section-heading">
            <span class="govuk-accordion__section-button" id="accordion-default-heading-3">
              All certificates
            </span>
          </h2>
        </div>
        <div id="accordion-default-content-3" class="govuk-accordion__section-content" aria-labelledby="accordion-default-heading-3">

          <% if @component.certificates.present? %>
            <%= render partial: "certificates/list/certificate_table",
            locals: { certificates: @component.certificates,
            heading: 'All certificates for this component'}
            %>
          <% end %>

        </div>
      </div>
    </div>

<% end %>







