<h1 class="govuk-heading-xl"><%= @component.name %></h1>

<h2 class="govuk-heading-l"><%= @component.component_type %></h2>

<%= link_to 'Upload', new_sp_component_certificate_path(@component), class: 'govuk-button' %>

<%= render partial: "certificates/status/certificate_table",
  locals: { certificates: @component.enabled_signing_certificates,
  heading: t('components.sign_cert_enabled') } 
%>

<%= render partial: "certificates/status/certificate_table",
  locals: { certificates: @component.disabled_signing_certificates,
  heading: t('components.sign_cert_disabled') }
%>

<% if @component.encryption_certificate.present? %>
  <%= render partial: "certificates/status/certificate_table",
    locals: { certificates: [@component.encryption_certificate],
    heading: t('components.assigned_encryption_cert') }
  %>
<% end %>

<% if @component.certificates.present? %>

  <div class="govuk-accordion" data-module="accordion" id="accordion-default">
    <div class="govuk-accordion__section ">
      <div class="govuk-accordion__section-header">
        <h2 class="govuk-accordion__section-heading">
          <span class="govuk-accordion__section-button" id="accordion-default-heading-2">
            <%= t 'components.previous_encryption_cert' %>
          </span>
        </h2>
      </div>
      <div id="accordion-default-content-2" class="govuk-accordion__section-content" aria-labelledby="accordion-default-heading-2">

          <% if @component.encryption_certificates.present? %>
            <%= render partial: "certificates/list/certificate_table",
            locals: {
              certificates: @component.previous_encryption_certificates,
              heading: t('components.previous_assigned_encryption_cert') }
          %>
          <% end %>

      </div>
    </div>
    <div class="govuk-accordion__section ">
      <div class="govuk-accordion__section-header">
        <h2 class="govuk-accordion__section-heading">
          <span class="govuk-accordion__section-button" id="accordion-default-heading-3">
             <%= t 'components.all_certs' %>
          </span>
        </h2>
      </div>
      <div id="accordion-default-content-3" class="govuk-accordion__section-content" aria-labelledby="accordion-default-heading-3">

        <% if @component.certificates.present? %>
          <%= render partial: "certificates/list/certificate_table",
          locals: { certificates: @component.certificates,
          heading: t('components.all_certs_for_componenet') }
          %>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% if @component.services.present? %>
  <%= render "services/list/services_table" %>
<% end %>

<%= link_to t('components.add_service'),
    polymorphic_url([:new, @component, :service], component: @component),
    class: 'govuk-button', data: { module: "govuk-button" } %>
